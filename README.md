# üìö Formula LaTeX - B·ªô T·∫°o C√¢u H·ªèi To√°n H·ªçc

D·ª± √°n t·∫°o c√¢u h·ªèi tr·∫Øc nghi·ªám to√°n h·ªçc b·∫±ng Python v√† LaTeX v·ªõi h·ªó tr·ª£ ti·∫øng Vi·ªát ho√†n ch·ªânh.

## üéØ T·ªïng quan

B·ªô c√¥ng c·ª• n√†y gi√∫p gi√°o vi√™n v√† h·ªçc sinh t·∫°o ra c√°c b√†i ki·ªÉm tra to√°n h·ªçc chuy√™n nghi·ªáp v·ªõi:
- C√¢u h·ªèi ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông
- ƒê√°p √°n chi ti·∫øt
- ƒê·ªãnh d·∫°ng LaTeX chu·∫©n
- H·ªó tr·ª£ ti·∫øng Vi·ªát

## üìÅ C·∫•u tr√∫c th∆∞ m·ª•c (c·∫≠p nh·∫≠t ki·∫øn tr√∫c m·ªõi)

```
FomularLatex/
‚îú‚îÄ‚îÄ üìÇ src/                         # Ch·ª©a c√°c script sinh c√¢u h·ªèi c≈©
‚îÇ   ‚îú‚îÄ‚îÄ asymptote_mc.py             # Generator c√¢u h·ªèi ti·ªám c·∫≠n
‚îÇ   ‚îú‚îÄ‚îÄ asymptotic_advanced.py      # Generator c√¢u h·ªèi n√¢ng cao
‚îÇ   ‚îú‚îÄ‚îÄ true_false_triangle_questions.py  # Generator tam gi√°c ƒë√∫ng/sai
‚îÇ   ‚îî‚îÄ‚îÄ ... (c√°c file kh√°c)
‚îú‚îÄ‚îÄ üìÇ base_template/ ‚≠ê             # NEW: Clean Architecture Framework
‚îÇ   ‚îú‚îÄ‚îÄ main_runner.py              # CLI ch√≠nh v·ªõi argparse
‚îÇ   ‚îú‚îÄ‚îÄ base_optimization_question.py    # Abstract base class
‚îÇ   ‚îú‚îÄ‚îÄ latex_document_builder.py  # LaTeX document builder
‚îÇ   ‚îú‚îÄ‚îÄ question_type_loader.py     # Dynamic module loader
‚îÇ   ‚îú‚îÄ‚îÄ question_manager.py         # Question generation manager
‚îÇ   ‚îú‚îÄ‚îÄ extremum_from_tikz.py       # C√¢u h·ªèi c·ª±c tr·ªã t·ª´ ƒë·ªì th·ªã
‚îÇ   ‚îî‚îÄ‚îÄ tikz_figure_library.py      # Th∆∞ vi·ªán TikZ figures
‚îú‚îÄ‚îÄ requirements.txt                # Dependencies
‚îî‚îÄ‚îÄ README.md                       # T√†i li·ªáu n√†y
```

## üöÄ B·∫Øt ƒë·∫ßu nhanh

### 1. C√†i ƒë·∫∑t m√¥i tr∆∞·ªùng

```bash
# Clone repository
git clone https://github.com/quytttb/FomularLatex.git
cd FomularLatex

# C√†i ƒë·∫∑t dependencies (n·∫øu c·∫ßn)
pip install -r requirements.txt
```

### 2. S·ª≠ d·ª•ng CLI m·ªõi (Khuy·∫øn ngh·ªã) ‚≠ê

```bash
# Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c base_template
cd base_template

# Sinh 5 c√¢u h·ªèi, format 1 (ƒë√°p √°n ngay sau c√¢u)
python3 main_runner.py 5 1

# Sinh 10 c√¢u h·ªèi, format 2 (ƒë√°p √°n ·ªü cu·ªëi), verbose mode
python3 main_runner.py 10 2 --verbose

# T√πy ch·ªânh output file v√† title
python3 main_runner.py 5 1 -o my_test.tex -t "B√†i Ki·ªÉm Tra Gi·ªØa K·ª≥"

# Xem h∆∞·ªõng d·∫´n ƒë·∫ßy ƒë·ªß
python3 main_runner.py --help

# Bi√™n d·ªãch file LaTeX
xelatex optimization_questions.tex
```

### 3. S·ª≠ d·ª•ng scripts c≈© (Legacy)

```bash
# Sinh c√¢u h·ªèi ti·ªám c·∫≠n (5 c√¢u)
python3 src/asymptote_mc.py 5
xelatex asymptote_mc_questions.tex
python3 src/asymptote_mc.py 5
xelatex asymptote_mc_questions.tex

# Sinh c√¢u h·ªèi ti·ªám c·∫≠n n√¢ng cao (10 c√¢u)
python3 src/asymptotic_advanced.py 10
xelatex asymptotic_advanced_questions_generated.tex

# Sinh c√¢u h·ªèi tam gi√°c ƒë√∫ng/sai (8 c√¢u)
python3 src/true_false_triangle_questions.py 8
xelatex true_false_triangle_questions.tex
```

## üìö C√°c module c√≥ s·∫µn

### üéØ NEW: Clean Architecture Framework ‚≠ê
- **V·ªã tr√≠**: `base_template/`
- **CLI**: `python3 main_runner.py --help`
- **Ch·ª©c nƒÉng**: 
  - CLI chuy√™n nghi·ªáp v·ªõi argparse
  - Timeout protection v√† retry logic
  - Clean architecture v·ªõi separation of concerns
  - H·ªó tr·ª£ multiple question types
- **Question Types**:
  - ‚úÖ ExtremumFromTikz (C·ª±c tr·ªã t·ª´ ƒë·ªì th·ªã TikZ)
  - üîÑ D·ªÖ d√†ng th√™m types m·ªõi
- **Tr·∫°ng th√°i**: ‚úÖ Production ready

### üî¢ Legacy Modules
#### Asymptote Questions
- **V·ªã tr√≠**: `src/asymptote_mc.py`
- **Ch·ª©c nƒÉng**: T·∫°o c√¢u h·ªèi v·ªÅ ti·ªám c·∫≠n xi√™n
- **ƒê·ªãnh d·∫°ng**: Tr·∫Øc nghi·ªám 4 ƒë√°p √°n
- **Tr·∫°ng th√°i**: ‚úÖ Ho√†n ch·ªânh

### üìà Asymptotic Advanced
- **V·ªã tr√≠**: `src/asymptotic_advanced.py`
- **Ch·ª©c nƒÉng**: C√¢u h·ªèi ti·ªám c·∫≠n n√¢ng cao
- **Tr·∫°ng th√°i**: ‚úÖ Ho√†n ch·ªânh

### üî∫ True/False Triangle
- **V·ªã tr√≠**: `src/true_false_triangle_questions.py`
- **Ch·ª©c nƒÉng**: C√¢u h·ªèi tam gi√°c ƒë√∫ng/sai
- **Tr·∫°ng th√°i**: ‚úÖ Ho√†n ch·ªânh

### üèóÔ∏è Base Template (Legacy)
- **V·ªã tr√≠**: `base_template/base_optimization_question.py`
- **Ch·ª©c nƒÉng**: Abstract base class (ƒë√£ refactor)
- **S·ª≠ d·ª•ng**: Framework ph√°t tri·ªÉn c≈©
- **Tr·∫°ng th√°i**: ‚úÖ Deprecated (S·ª≠ d·ª•ng new architecture)

## ‚ú® T√≠nh nƒÉng n·ªïi b·∫≠t

### üÜï New Architecture Features ‚≠ê
- üéØ **CLI chuy√™n nghi·ªáp** v·ªõi argparse v√† help
- ‚è±Ô∏è **Timeout protection** tr√°nh hang process  
- üîÑ **Retry logic** x·ª≠ l√Ω l·ªói t·ª± ƒë·ªông
- üìä **Statistics reporting** chi ti·∫øt qu√° tr√¨nh
- üîß **Clean Architecture** d·ªÖ maintain v√† extend
- üéõÔ∏è **Verbose mode** cho debugging
- üìù **Custom output** file v√† title

### üåü Core Features
- üáªüá≥ **H·ªó tr·ª£ ti·∫øng Vi·ªát** ho√†n ch·ªânh v·ªõi polyglossia
- üìÑ **LaTeX chuy√™n nghi·ªáp** v·ªõi Times New Roman v√† author="dev"
- üî¢ **T√≠nh to√°n ch√≠nh x√°c** v·ªõi Fraction v√† SymPy
- üéØ **Framework m·ªü r·ªông** cho nhi·ªÅu d·∫°ng b√†i
- üé≤ **Random seed** ƒë·ªÉ t·∫°o b√†i kh√°c nhau
- üìä **Multiple choice** v√† **True/False**
- üîç **L·ªùi gi·∫£i chi ti·∫øt** t·ª± ƒë·ªông

## üõ†Ô∏è Y√™u c·∫ßu h·ªá th·ªëng

### Python
- Python 3.6+ 
- Kh√¥ng c·∫ßn th∆∞ vi·ªán b√™n ngo√†i (ch·ªâ d√πng built-in)

### LaTeX
- XeLaTeX ƒë·ªÉ compile PDF
- Font Times New Roman

### C√†i ƒë·∫∑t XeLaTeX

```bash
# Ubuntu/Debian
sudo apt-get install texlive-xetex texlive-latex-extra texlive-fonts-extra

# macOS (v·ªõi Homebrew)
brew install mactex-no-gui

# Windows
# T·∫£i v√† c√†i ƒë·∫∑t MiKTeX: https://miktex.org/
# Ho·∫∑c TeX Live: https://www.tug.org/texlive/
```

## üìù V√≠ d·ª• output

### CLI Help
```bash
$ python3 main_runner.py --help
usage: main_runner.py [-h] [-o OUTPUT] [-t TITLE] [-v] num_questions format

üéØ T·∫°o c√¢u h·ªèi t·ªëi ∆∞u h√≥a v·ªõi LaTeX

positional arguments:
  num_questions         S·ªë l∆∞·ª£ng c√¢u h·ªèi c·∫ßn t·∫°o (vd: 5, 10)
  format               ƒê·ªãnh d·∫°ng ƒë√°p √°n: 1=ƒë√°p √°n ngay sau c√¢u, 2=ƒë√°p √°n ·ªü cu·ªëi

options:
  -h, --help           show this help message and exit
  -o OUTPUT, --output OUTPUT
                       T√™n file ƒë·∫ßu ra (m·∫∑c ƒë·ªãnh: optimization_questions.tex)
  -t TITLE, --title TITLE
                       Ti√™u ƒë·ªÅ t√†i li·ªáu (m·∫∑c ƒë·ªãnh: C√¢u h·ªèi T·ªëi ∆∞u h√≥a)
  -v, --verbose        In chi ti·∫øt qu√° tr√¨nh t·∫°o c√¢u h·ªèi

Examples:
  python3 main_runner.py 5 1                    # 5 c√¢u, ƒë√°p √°n sau m·ªói c√¢u
  python3 main_runner.py 10 2 -v                # 10 c√¢u, ƒë√°p √°n cu·ªëi, verbose
  python3 main_runner.py 3 1 -o test.tex -t "Ki·ªÉm tra"  # Custom file v√† title
```

### Verbose Output
```bash
$ python3 main_runner.py 2 1 -v
‚úÖ ƒê√£ load th√†nh c√¥ng: ExtremumFromTikz t·ª´ extremum_from_tikz
üìö T·ªïng c·ªông ƒë√£ load 1 d·∫°ng to√°n
üìã C√≥ 1 lo·∫°i c√¢u h·ªèi kh·∫£ d·ª•ng
ƒêang t·∫°o c√¢u h·ªèi 1
‚úÖ ƒê√£ t·∫°o th√†nh c√¥ng c√¢u h·ªèi 1 (lo·∫°i: ExtremumFromTikzQuestion)
ƒêang t·∫°o c√¢u h·ªèi 2
‚úÖ ƒê√£ t·∫°o th√†nh c√¥ng c√¢u h·ªèi 2 (lo·∫°i: ExtremumFromTikzQuestion)
üìä Th·ªëng k√™ sinh c√¢u h·ªèi:
   - T·ªïng s·ªë sinh th√†nh c√¥ng: 2
   - T·ªïng s·ªë th·∫•t b·∫°i: 0
   - S·ªë l·∫ßn retry: 0
   - S·ªë l·∫ßn timeout: 0
‚úÖ ƒê√£ t·∫°o th√†nh c√¥ng optimization_questions.tex v·ªõi 2 c√¢u h·ªèi
üìÑ Bi√™n d·ªãch b·∫±ng: xelatex optimization_questions.tex
üìã Format: 1 (ƒë√°p √°n ngay sau c√¢u h·ªèi)
```

### C√¢u h·ªèi c·ª±c tr·ªã t·ª´ ƒë·ªì th·ªã (NEW)
```latex
C√¢u 1: Cho ƒë·ªì th·ªã h√†m s·ªë y=f(x) c√≥ ƒë·ªì th·ªã nh∆∞ h√¨nh v·∫Ω d∆∞·ªõi ƒë√¢y:

[TikZ graph showing function with extrema]

D·ª±a v√†o ƒë·ªì th·ªã, h√£y x√°c ƒë·ªãnh gi√° tr·ªã c·ª±c ƒë·∫°i c·ªßa h√†m s·ªë.

A. 1
*B. 2
C. 3  
D. 4

L·ªùi gi·∫£i:
T·ª´ ƒë·ªì th·ªã ta th·∫•y h√†m s·ªë ƒë·∫°t c·ª±c ƒë·∫°i t·∫°i ƒëi·ªÉm (-1, 1)...
```

### C√¢u h·ªèi ti·ªám c·∫≠n (Legacy)
```latex
C√¢u 1: Cho h√†m s·ªë $y = \frac{x^2 + 3x - 2}{x - 1}$.
Ph∆∞∆°ng tr√¨nh ƒë∆∞·ªùng ti·ªám c·∫≠n xi√™n c·ªßa ƒë·ªì th·ªã h√†m s·ªë n√†y l√†:

A. $y = x + 4 + \frac{2}{x - 1}$
B. $y = x + 2 + \frac{1}{x - 1}$
C. $y = 2x + 4 + \frac{1}{x - 1}$
*D. $y = x + 4 + \frac{2}{x - 1}$

L·ªùi gi·∫£i:
Th·ª±c hi·ªán ph√©p chia ƒëa th·ª©c...
```

### C√¢u h·ªèi tam gi√°c ƒë√∫ng/sai
```latex
Cho tam gi√°c ABC v·ªõi a = 5, b = 7, c = 8.

a) Tam gi√°c ABC l√† tam gi√°c nh·ªçn. (ƒê√∫ng)
b) Di·ªán t√≠ch tam gi√°c b·∫±ng 10‚àö6. (ƒê√∫ng)
c) B√°n k√≠nh ƒë∆∞·ªùng tr√≤n ngo·∫°i ti·∫øp b·∫±ng 7‚àö6/6. (ƒê√∫ng)
d) Chu vi tam gi√°c b·∫±ng 21. (Sai)
```

## üöÄ Ph√°t tri·ªÉn module m·ªõi

### Ph∆∞∆°ng ph√°p m·ªõi (Clean Architecture) ‚≠ê

#### B∆∞·ªõc 1: T·∫°o question type m·ªõi
```python
# T·∫°o file: my_new_question.py trong base_template/
from base_optimization_question import BaseOptimizationQuestion
from typing import Dict, Any, List

class MyNewQuestion(BaseOptimizationQuestion):
    def generate_parameters(self) -> Dict[str, Any]:
        return {"param1": random.randint(1, 10)}
    
    def calculate_answer(self) -> str:
        return str(self.parameters["param1"] * 2)
    
    def generate_wrong_answers(self) -> List[str]:
        correct = int(self.correct_answer)
        return [str(correct + 1), str(correct - 1), str(correct + 2)]
    
    def generate_question_text(self) -> str:
        return f"T√≠nh 2 √ó {self.parameters['param1']} = ?"
    
    def generate_solution(self) -> str:
        return f"2 √ó {self.parameters['param1']} = {self.correct_answer}"
```

#### B∆∞·ªõc 2: Test v√† s·ª≠ d·ª•ng
```bash
# T·ª± ƒë·ªông ƒë∆∞·ª£c load b·ªüi QuestionTypeLoader
python3 main_runner.py 5 1 -v
xelatex optimization_questions.tex
```

### Ph∆∞∆°ng ph√°p c≈© (Legacy)

#### B∆∞·ªõc 1: Copy template
```bash
cp base_template/math_question_base.py my_new_module.py
```

#### B∆∞·ªõc 2: T√πy ch·ªânh
- Ch·ªânh s·ª≠a h√†m `generate_question()`
- C·∫≠p nh·∫≠t logic t·∫°o ƒë√°p √°n
- Th√™m l·ªùi gi·∫£i

#### B∆∞·ªõc 3: Test v√† ch·∫°y
```bash
python3 my_new_module.py 5
xelatex output.tex
```

## ü§ù ƒê√≥ng g√≥p

1. Fork repository
2. T·∫°o branch m·ªõi: `git checkout -b feature-ten-tinh-nang`
3. Commit thay ƒë·ªïi: `git commit -m 'Th√™m t√≠nh nƒÉng m·ªõi'`
4. Push: `git push origin feature-ten-tinh-nang`
5. T·∫°o Pull Request

## üìú License

D·ª± √°n ƒë∆∞·ª£c ph√°t h√†nh d∆∞·ªõi MIT License. Xem file LICENSE ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt.


## üôè C·∫£m ∆°n

C·∫£m ∆°n c·ªông ƒë·ªìng LaTeX v√† Python Vi·ªát Nam ƒë√£ h·ªó tr·ª£ ph√°t tri·ªÉn d·ª± √°n n√†y!

---
